var Fs=require("fs"),Hoek=require("hoek"),Nes=require("nes"),Fs=require("fs"),Url=require("url"),Sandglitch=require("./../lib/sandglitch.js");exports.register=function(e,r,i){e.route({method:"GET",path:"/local/{jsonFile*}",handler:function(e,r){var i=[__dirname,"..","fixtures",encodeURIComponent(e.params.jsonFile)].join("/");r.file(i)}}),e.route({method:"POST",path:"/sand",config:{payload:{output:"stream",parse:!0,allow:"multipart/form-data"},handler:function(e,r){var i=e.payload;err&&console.log(err),console.log(e);var a=i.img,o=i.effects,t=fs.createWriteStream(__dirname+"/assets/temp/temp.jpg");t.on("error",function(e){console.error(e)}),i.image.pipe(t),i.image.on("end",function(e){var a={filename:i.image.hapi.filename,headers:i.file.hapi.headers};r(JSON.stringify(a))}),r(JSON.stringify(ret))}}}),i()},exports.register.attributes={name:"apis-routes",version:"1.0.0"};