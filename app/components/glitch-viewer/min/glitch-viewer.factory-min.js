angular.module("sandglitch").factory("GlitchViewerFactory",function(t,e){var i=function(){var i=this;this.effects,this.origUrl,this.previewUrl,this.busy=!1,this.updateEffects=function(t){this.effects=t,console.log(this.effects)},this.compressFile=function(i){var s=this;if(!this.busy){this.busy=!0;var r=new FileReader;r.onloadend=function(){s.origUrl=r.result,s.previewUrl=r.result,s.busy=!1},e.compress({sourceFile:i,maxWidth:500,maxHeight:500,outputFormat:"jpeg",quality:.8}).then(function(e){console.log(e),s.origImage=e,t.updateImage(e),r.readAsDataURL(e),s.busy=!1})}},this.glitchImage=function(){var e=this,i=this.origUrl;this.busy||(this.busy=!0,console.log(this),t.sendImage(this.origUrl,this.effects).then(function(t){return console.log(t),e.previewUrl=t,e.busy=!1,t}))}};return i});