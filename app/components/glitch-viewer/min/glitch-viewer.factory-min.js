angular.module("sandglitch").factory("GlitchViewerFactory",function(t,e){var i=function(){this.effects,this.origUrl,this.previewUrl,this.busy=!1,this.updateEffects=function(t){this.effects=t,console.log(this.effects)},this.compressFile=function(t){var i=this;if(!this.busy){this.busy=!0;var s=new FileReader;s.onloadend=function(){i.origUrl=s.result,i.previewUrl=s.result},e.compress({sourceFile:t,maxWidth:500,maxHeight:500,outputFormat:"jpeg"}).then(function(t){console.log(t),i.origImage=t,s.readAsDataURL(t),i.busy=!1})}},this.glitchImage=function(){var e=this,i=this.origUrl;this.busy||(this.busy=!0,t.sendImage(this.origUrl,this.effects).then(function(t){return console.log(t),e.previewUrl=t,e.busy=!1,t}))}};return i});