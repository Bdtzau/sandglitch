angular.module("sandglitch").factory("GlitchViewerFactory",function(t,e){var s=function(){var s=this;this.effects,this.origUrl,this.previewUrl,this.busy=!1,this.updateEffects=function(t){this.effects=t,console.log(this.effects)},this.compressFile=function(s){var i=this;if(!this.busy){this.busy=!0;var r=new FileReader;r.onloadend=function(){i.origUrl=r.result,i.previewUrl=r.result,t.updateImage(r.result),i.busy=!1},e.compress({sourceFile:s,maxWidth:500,maxHeight:500,outputFormat:"jpeg",quality:.8}).then(function(t){console.log(t),i.origImage=t,r.readAsDataURL(t),i.busy=!1})}},this.glitchImage=function(){var e=this,s=this.origUrl;this.busy||(this.busy=!0,console.log(this),t.sendImage(this.origImage,this.effects).then(function(t){return console.log(t),e.previewUrl=t,e.busy=!1,t}))}};return s});